<!-- Views/DashboardView.axaml -->
<UserControl
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vms="clr-namespace:KeyCard.Desktop.ViewModels"
    xmlns:m="clr-namespace:KeyCard.Desktop.Models"
    x:Class="KeyCard.Desktop.Views.DashboardView"
    x:DataType="vms:DashboardViewModel">

  <Grid RowDefinitions="Auto,*" Margin="8">

    <!-- Top row: section title + actions + quick filter -->
    <DockPanel Grid.Row="0" LastChildFill="True" Margin="8,4,8,10">
      <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" Spacing="8">
        <TextBlock Text="Dashboard" FontSize="20" FontWeight="SemiBold" Foreground="#E8E8F0" />
        <Button Content="Front Desk" Command="{Binding GoFrontDesk}" />
        <Button Content="Housekeeping" Command="{Binding GoHousekeeping}" />
        <Button Content="Refresh" Command="{Binding RefreshCommand}" />
      </StackPanel>

      <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
        <TextBlock Text="Filter:" VerticalAlignment="Center" Foreground="#CFCFEA" />
        <TextBox Width="220" Watermark="Name / Booking / Room" Text="{Binding SearchText}"/>
      </StackPanel>
    </DockPanel>

    <!-- Body -->
    <Border Grid.Row="1" CornerRadius="10" BorderBrush="#3F2F73" BorderThickness="1" Padding="8" Margin="8">
      <StackPanel Spacing="8">
        <TextBlock Text="Today's Arrivals" FontWeight="SemiBold" Foreground="#E8E8F0"/>

        <DataGrid
            ItemsSource="{Binding ArrivalsView}"
            GridLinesVisibility="None"
            HeadersVisibility="Column"
            CanUserSortColumns="True"
            CanUserResizeColumns="True"
            CanUserReorderColumns="True"
            IsReadOnly="True"
            RowHeight="40"
            HorizontalScrollBarVisibility="Auto"
            VerticalScrollBarVisibility="Auto"
            BorderBrush="#4B3A86"
            BorderThickness="1"
            Background="#141419"
            Foreground="#EDEDF7"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">

          <!-- Use TemplateColumns so compiled bindings resolve against m:Booking -->
          <DataGrid.Columns>

            <DataGridTemplateColumn Header="Booking ID" Width="2*" SortMemberPath="BookingId">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding BookingId}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn Header="Guest" Width="2*" SortMemberPath="GuestName">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding GuestName}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn Header="Room" Width="*" SortMemberPath="RoomNumber">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding RoomNumber}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <!-- Keep/check these only if your Booking model exposes them -->
            <DataGridTemplateColumn Header="Check-In" Width="*" SortMemberPath="CheckIn">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding CheckIn}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn Header="Check-Out" Width="*" SortMemberPath="CheckOut">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding CheckOut}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

          </DataGrid.Columns>
        </DataGrid>
      </StackPanel>
    </Border>
  </Grid>

  <!-- Local styles -->
  <UserControl.Styles>
    <Style Selector="Button">
      <Setter Property="Background" Value="#2A2840"/>
      <Setter Property="BorderBrush" Value="#5C46A3"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Foreground" Value="#EDEDF7"/>
      <Setter Property="Padding" Value="8,6"/>
      <Setter Property="CornerRadius" Value="8"/>
    </Style>

    <Style Selector="TextBox">
      <Setter Property="Background" Value="#1B1B24"/>
      <Setter Property="BorderBrush" Value="#4B3A86"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Foreground" Value="#EDEDF7"/>
      <Setter Property="CornerRadius" Value="6"/>
      <Setter Property="Padding" Value="8,6"/>
    </Style>
  </UserControl.Styles>
</UserControl>

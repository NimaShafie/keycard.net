<!-- src/Desktop/KeyCard.Desktop/Views/DashboardView.axaml -->
<UserControl
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vms="clr-namespace:KeyCard.Desktop.ViewModels"
    xmlns:m="clr-namespace:KeyCard.Desktop.Models"
    x:Class="KeyCard.Desktop.Views.DashboardView"
    x:DataType="vms:DashboardViewModel">

  <Grid RowDefinitions="Auto,*" Margin="8">

    <!-- Header row: aligned title + actions + filter -->
    <Border Grid.Row="0" CornerRadius="10" BorderBrush="#3F2F73" BorderThickness="1" Padding="10" Margin="8,4,8,10">
      <Grid ColumnDefinitions="Auto,Auto,Auto,Auto,*,Auto" VerticalAlignment="Center">
        <TextBlock Grid.Column="0"
                   Text="Dashboard"
                   FontSize="20"
                   FontWeight="SemiBold"
                   Foreground="#E8E8F0"
                   VerticalAlignment="Center"
                   Margin="0,0,12,0"/>

        <!-- NOTE: use *Command* properties generated by [RelayCommand] -->
        <Button Grid.Column="1" Content="Front Desk"
                Height="36" Padding="12,0"
                VerticalAlignment="Center"
                Command="{Binding GoFrontDeskCommand}"/>

        <Button Grid.Column="2" Content="Housekeeping"
                Height="36" Padding="12,0" Margin="8,0,0,0"
                VerticalAlignment="Center"
                Command="{Binding GoHousekeepingCommand}"/>

        <StackPanel Grid.Column="3" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center" Margin="8,0,0,0">
          <Button Content="Refresh" Height="36" Padding="12,0"
                  Command="{Binding RefreshCommand}"/>
          <!-- Fallback spinner: slim indeterminate bar -->
          <ProgressBar IsIndeterminate="True"
                       IsVisible="{Binding IsRefreshing}"
                       Height="6" MinWidth="110"
                       VerticalAlignment="Center" />
        </StackPanel>

        <!-- spacer -->
        <Border Grid.Column="4"/>

        <!-- filter -->
        <StackPanel Grid.Column="5" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
          <TextBlock Text="Filter:" VerticalAlignment="Center" Foreground="#CFCFEA" />
          <TextBox Width="220" Height="36" VerticalContentAlignment="Center"
                   Watermark="Name / Booking / Room"
                   Text="{Binding SearchText}"/>
        </StackPanel>
      </Grid>
    </Border>

    <!-- Body (unchanged) -->
    <Border Grid.Row="1" CornerRadius="10" BorderBrush="#3F2F73" BorderThickness="1" Padding="8" Margin="8">
      <StackPanel Spacing="8">
        <TextBlock Text="Today's Arrivals" FontWeight="SemiBold" Foreground="#E8E8F0"/>

        <DataGrid
            ItemsSource="{Binding ArrivalsView}"
            GridLinesVisibility="None"
            HeadersVisibility="Column"
            CanUserSortColumns="True"
            CanUserResizeColumns="True"
            CanUserReorderColumns="True"
            IsReadOnly="True"
            RowHeight="40"
            HorizontalScrollBarVisibility="Auto"
            VerticalScrollBarVisibility="Auto"
            BorderBrush="#4B3A86"
            BorderThickness="1"
            Background="#141419"
            Foreground="#EDEDF7"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">

          <DataGrid.Columns>
            <DataGridTemplateColumn Header="Booking ID" Width="2*" SortMemberPath="BookingId">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding BookingId}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn Header="Guest" Width="2*" SortMemberPath="GuestName">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding GuestName}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn Header="Room" Width="*" SortMemberPath="RoomNumber">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding RoomNumber}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn Header="Check-In" Width="*" SortMemberPath="CheckIn">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding CheckIn}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>

            <DataGridTemplateColumn Header="Check-Out" Width="*" SortMemberPath="CheckOut">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate x:DataType="m:Booking">
                  <TextBlock Text="{Binding CheckOut}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn>
          </DataGrid.Columns>
        </DataGrid>
      </StackPanel>
    </Border>
  </Grid>

  <!-- Styles kept -->
  <UserControl.Styles>
    <Style Selector="Button">
      <Setter Property="Background" Value="#2A2840"/>
      <Setter Property="BorderBrush" Value="#5C46A3"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Foreground" Value="#EDEDF7"/>
      <Setter Property="Padding" Value="8,6"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="VerticalContentAlignment" Value="Center"/>
      <Setter Property="HorizontalContentAlignment" Value="Center"/>
    </Style>

    <Style Selector="TextBox">
      <Setter Property="Background" Value="#1B1B24"/>
      <Setter Property="BorderBrush" Value="#4B3A86"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Foreground" Value="#EDEDF7"/>
      <Setter Property="CornerRadius" Value="6"/>
      <Setter Property="Padding" Value="8,6"/>
      <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style>
  </UserControl.Styles>
</UserControl>
